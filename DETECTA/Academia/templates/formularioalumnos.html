<!DOCTYPE html>
<html>
<head>
    <title>Formulario Alumnos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
</head>
<body>
    <h1>Formulario Alumnos</h1>

    <form method="post" action="{% url 'formulario_modelo_alumno' %}">
        {% csrf_token %}

        <label for="tipo_grafico">Tipo de Gr치fico:</label>
        <select id="tipo_grafico" name="tipo_grafico">
            <option value="pastel">Pastel</option>
            <option value="barras">Barras</option>
        </select>

        <label for="datos_grafico">Datos para el Gr치fico:</label>
        <select id="datos_grafico" name="datos_grafico">
            <option value="nacionalidad_alumno">Nacionalidad</option>
            <option value="codigo_nivel">Nivel de Escolaridad</option>
            <option value="carnet_alumno">Carnet del Alumno</option>
            <option value="nombre_alumno">Nombre del Alumno</option>
            <option value="username_alumno">Nombre de Usuario</option>
            <option value="fechanac_alumno">Fecha de Nacimiento</option>
            <option value="lugar_alumno">Lugar de Nacimiento</option>
        </select>

        <button type="submit">Generar Gr치fico</button>
    </form>

    <h2>Gr치fico</h2>
    <canvas id="chartCanvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var ctx = document.getElementById('chartCanvas').getContext('2d');
            var chartData = JSON.parse('{{ chart_data|safe }}');
            
            new Chart(ctx, {
                type: chartData.chart_type,
                data: {
                    labels: chartData.labels,
                    datasets: [{
                        label: 'Cantidad',
                        data: chartData.data,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
